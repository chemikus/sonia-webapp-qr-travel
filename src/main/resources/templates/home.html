<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <title>QR Travel</title>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Ostfalia, Rechenzentrum">
    <title>Poolraum Anmeldung</title>
    <!-- Bootstrap core CSS -->
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="/custom/css/starter-template.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/main.css">
  </head>

  <body>
    <div class="container">
      <img id="qrlogo" width="64" height="64" src="/image/logo.png" />

      <!-- confirmation message alert -->
      <div id="sendDataModalMessage" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Vielen Dank.</h5>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <p>Folgenden Daten wurden gebucht.</p>
              <p id="valuesForMessage"></p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal" >OK</button>
            </div>
          </div>
        </div>
      </div>
      <!-- end confirmation message alert -->

      <!-- confimation message alert -->
      <div id="invalidEntryModalMessage" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Fehler</h5>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <p id="invalidEntryModalMessageInfoText"></p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal" >OK</button>
            </div>
          </div>
        </div>
      </div>
      <!-- end confimation message alert -->

      <div th:if="${room == null}">
        <div class="row">
          <div class="d-none d-md-block col-md-3 ">&nbsp;</div>
          <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
            <h1 id="roomtype" >Raum-PIN?</h1>
            <div th:if="${pin != null}">
              <h3 id="roompin" >Raum <span th:text="${pin}" /> nicht gefunden!</h3>
            </div>
          </div>
          <div class="d-none d-md-block col-md-3 ">&nbsp;</div>
        </div>

        <form name="nopin" method="GET">
          <div class="form-row">
            <div class="d-none d-md-block col-md-3">&nbsp;</div>
            <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
              <input type="text" name="p" id="pin" maxlength="6" size="35"
                     oninput="this.value=this.value.replace(/[^0-9]/g,'');checkAndSendForNoPin(document.forms.nopin);"
                     placeholder="Raum-PIN" class="form-control input-lg text-center">
            </div>
          </div>
        </form>
      </div>

      <div th:if="${room != null}">
        <div class="row">
          <div class="d-none d-md-block col-md-3 ">&nbsp;</div>
          <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
            <h1 id="roomtype" ><span th:text="${room.roomType.description}" th:remove="tag" /></h1>
            <h3 id="roomdesc" ><span th:text="${room.description}" th:remove="tag" /></h3>
          </div>
          <div class="d-none d-md-block col-md-3 ">&nbsp;</div>
        </div>

        <form name="roomForm" action="#" th:action="@{/(p=${pin})}" th:object="${attendeeInfo}" method="POST" >
          <div class="form-row">
            <div class="d-none d-md-block col-md-3">&nbsp;</div>
            <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
              <input type="text" name="pin" id="pin" maxlength="6" size="35" th:value="${room.pin}" readonly="true" class="form-control input-lg text-center" >
            </div>
          </div>

          <div th:if="${room.roomType.rtype != 1}"> <!-- ordinary room -->
            <div class="form-row">
              <div class="d-none d-md-block col-md-3">&nbsp;</div>
              <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
                <input type="text" name="mail" id="mail" size="35" placeholder="e-Mail" th:value="${token.mail}" class="form-control input-lg text-center" >
              </div>
            </div>
            <div class="form-row">
              <div class="d-none d-md-block col-md-3">&nbsp;</div>
              <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
                <input type="text" name="phone" id="phone" maxlength="24" size="35" placeholder="Telefonnummer" th:value="${token.phone}" class="form-control input-lg text-center" >
              </div>
            </div>           
            <div class="form-row">
              <div class="d-none d-md-block col-md-3">&nbsp;</div>
              <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
                <input type="text" name="givenName" id="givenName" size="35" placeholder="Vorname" th:value="${token.givenName}" class="form-control input-lg text-center" >
              </div>
            </div>           
            <div class="form-row">
              <div class="d-none d-md-block col-md-3">&nbsp;</div>
              <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
                <input type="text" name="surname" id="surname" size="35" placeholder="Nachname" th:value="${token.surname}" class="form-control input-lg text-center" >
              </div>
            </div>           
            <div class="form-row">
              <div class="d-none d-md-block col-md-3">&nbsp;</div>
              <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
                <input type="text" name="location" id="location" size="35" placeholder="Platz-Nr." th:value="${token.location}" class="form-control input-lg text-center" >
              </div>
            </div>           
          </div>

          <div th:if="${room.roomType.rtype == 1}"> <!-- exam room (Klausur) -->
            <div class="form-row">
              <div class="d-none d-md-block col-md-3">&nbsp;</div>
              <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
                <input type="text" name="phone" id="phone" maxlength="24" size="35" placeholder="Telefonnummer" th:value="${token.phone}" class="form-control input-lg text-center" >
              </div>
            </div>           
            <div class="form-row">
              <div class="d-none d-md-block col-md-3">&nbsp;</div>
              <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
                <input type="text" name="location" id="location" maxlength="24" size="35" placeholder="Platz-Nr." th:value="${token.location}" class="form-control input-lg text-center" >
              </div>
            </div>           
            <div class="form-row">
              <div class="d-none d-md-block col-md-3">&nbsp;</div>
              <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
                <input type="text" name="uid" id="uid" maxlength="10" size="35" placeholder="Account-ID" th:value="${token.uid}" class="form-control input-lg text-center" >
              </div>
            </div>
            <div class="form-row">
              <div class="d-none d-md-block col-md-3">&nbsp;</div>
              <div class="col-xs-12 col-sm-12 col-md-6 mt-1" style="text-align: center;">
                <input type="password" name="password" id="password" maxlength="24" size="35" placeholder="Password" th:value="${token.password}" class="form-control input-lg text-center" >
              </div>
            </div>           
          </div>
          <div class="form-row">
            <div class="d-none d-md-block col-md-3">&nbsp;</div>
            <div class="col-xs-12 col-sm-12 col-md-6 mt-4 " style="text-align: center">
              <input type="button" name="submitButton" size="35" 
                     onclick="document.forms.roomForm.submit();"
                     th:value="${submitButtonText}" class="text-white btn btn-primary btn-lg btn-block">
            </div>
            <div class="d-none d-md-block col-md-3">&nbsp;</div>
          </div>
        </form>        
      </div>



    </div>
    <!-- Bootstrap core JavaScript
        ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="/jquery/jquery-3.5.1.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script>
    <script>window.jQuery;</script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/custom/js/next-input.js"></script>
    <script src="/custom/js/submit.js"></script>
    
    <div th:if="${dataCommitted}">
      <script>
        showCommitMessage();
      </script>
    </div>

  </body>
</html>
